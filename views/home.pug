//********begin manual extend layout paste*****************
html
  head
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(name='theme-color' content='#4DA5F4')
    meta(name='csrf-token', content=_csrf)
    title #{title} - Hackathon Starter
    link(rel='shortcut icon', href='/favicon.png')
    link(rel='stylesheet', href='/css/main.css')

  body
  include partials/header

  .container
    include partials/flash
    block content

  include partials/footer

  script(src='/js/lib/jquery-2.2.4.min.js')
  script(src='/js/lib/bootstrap.min.js')
  script(src='/js/main.js')

  // Google Analytics: change UA-XXXXX-X to be your site's ID
  script.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-XXXXX-X', 'auto');
    ga('send', 'pageview');
  //*****************end manual extend layout paste*****************//

block content

  if !user
    doctype html
    html
      head
        link(rel='stylesheet', type='text/css', href='css/launch_main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_devices.css')
        title
          | QuickShifts
        meta(charset='utf-8')
        meta(name='viewport', content='width=device-width,initial-scale=1')
      body
        link(rel='stylesheet', type='text/css', href='css/launch_main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_devices.css')
        header.header
          .container-lrg
            .col-12.spread
              div
                .logo
                  | QuickShifts
              //div
                a.nav-link(href='#')
                  | Twitter
                a.nav-link(href='#')
                  | Facebook
          .container-sml
            .col-12.text-center
              .heading
                | Create employee schedules, quickly
              .paragraph
                | The easiest way to schedule and communicate with hourly workers. Save time by letting us generate a range of schedules for you based on your shift needs and your employees' availability.
              .ctas
                a.ctas-button(href='/signup')
                  | Sign Up
          .container-lrg
            .centerdevices.col-12

        .feature4
          .container-lrg.flex
            .col-5.centervertical
              h3.subheading.center
                | Fair and efficient scheduling
              p.paragraph
                | You input shift requirements (e.g. 2 cooks needed from 9am-5pm) and target hours for each employee. Employees indicate availability for upcoming shifts. We send you all schedules meeting both your shift requirements and your employees' availability. Magic.
            .col-1
            .col-6
              .sidedevices
                .browserwrapper
                  .browser
                    .mask
                      img.mask-img(style='max-width:100%;', height='auto;', src='http://erikrood.com/calendar_feature.png')

        .feature2
          #two-feature.container-lrg.flex
            .col-6
              br
              h3.subheading.center Free 30-day trial
              p.paragraph
                | We want you to be completely happy with our product,
                |which is why we encourage you to try it out before you commit to a paid plan.
              br
              br
              br
              br
            .col-6
              br
              h3.subheading.center Simple scheduling
              p.paragraph
                | Our software learns from your past decisons to help suggest future schedules, saving you more time the longer you're with us.
                | Avoid conflicts, knowing that we've calculated all possible schedules meeting both your preferences and your employee's availability.
        br
        #home.promo
          .promo__wrap.fence
            h3.promo__text See which plan is right for your team:
            div
              a.button.button--outline(href='/prices') View Pricing & Plans
        .footer
          .container-sml.text-center
            .col-12
              .heading
                | Get started now, for free.
              .ctas
                a.ctas-button(href='/signup')
                  | Sign Up
        //  .container-sml.footer-nav
            .col-12.text-center
              div
                a.nav-link
                  | Twitter
                a.nav-link
                  | Facebook
                a.nav-link
                  | Contact
                a.nav-link
                  | TOS
                a.nav-link
                  | Privacy
              br


  else if user.user_type == 'schedule_type'
    //******
    //header information that was copied and pasted
    //******
    doctype html
    html
      head
        meta(charset='utf-8')
        meta(http-equiv='X-UA-Compatible', content='IE=edge')
        meta(name='viewport', content='width=device-width, initial-scale=1.0')
        meta(name='theme-color' content='#4DA5F4')
        meta(name='csrf-token', content=_csrf)
        title #{title} - Hackathon Starter
        link(rel='shortcut icon', href='/favicon.png')
        link(rel='stylesheet', href='/css/main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_devices.css')
      body
        include partials/header
        script(src='/js/lib/jquery-2.2.4.min.js')
        script(src='/js/lib/bootstrap.min.js')
        script(src='/js/main.js')
        link(rel='stylesheet', href='/css/main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_devices.css')
        .container
          include partials/flash
          block content

        include partials/footer
        script(src='/js/lib/jquery-2.2.4.min.js')
        script(src='/js/lib/bootstrap.min.js')
        script(src='/js/main.js')


        // Google Analytics: change UA-XXXXX-X to be your site's ID
        script.
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-XXXXX-X', 'auto');
          ga('send', 'pageview');






        // ********
        // ********
        // ********
        //adding my own script to load in table
        // ********
        // ********
        // ********
        script(type='text/javascript').

          var CSRF_HEADER = 'x-csrf-token';
          var setCSRFToken = function (securityToken) {
            jQuery.ajaxPrefilter(function (options, _, xhr) {
              if (!xhr.crossDomain) {
                xhr.setRequestHeader(CSRF_HEADER, securityToken);
              }
            });
          };


          function change_table() {
            //gettting json values
            var docs_json = document.getElementById("docs_json").value;
            var docs_json_value = JSON.parse( docs_json );

            //clearing table
            var table = document.getElementById("myTableData2")
            var ddl_value = document.getElementById("ddl").value;

            var listItems = [];
            console.log(docs_json_value)

            //putting items from json into list
            for (var i = 0; i < docs_json_value.length; i++){
              itemTest= docs_json_value[i].shift_date_range_start + " to " + docs_json_value[i].shift_date_range_end;
              if (itemTest == ddl_value){
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                //row.insertCell(0).innerHTML= docs_json_value[i].employee_type;
                //row.insertCell(1).innerHTML= docs_json_value[i].days_worked;
                //row.insertCell(2).innerHTML= docs_json_value[i].num_employees;
                //row.insertCell(3).innerHTML= docs_json_value[i].shift_start_time;
                //row.insertCell(4).innerHTML= docs_json_value[i].shift_end_time;
                console.log(docs_json_value[i].availability)
                if(docs_json_value[i].availability=="true"){
                  //row.insertCell(5).innerHTML= '<input id="type" type="checkbox" name="Available" autofocus="autofocus" checked="checked" onClick="Javacsript:on_check_click(this)">';
                } else {
                  //row.insertCell(5).innerHTML= '<input id="type" type="checkbox" name="Available"  autofocus="autofocus" onClick="Javacsript:on_check_click(this)">';
                }
              };
            };
          };
          // ********
          // ********
          // ********
          //adding my own script to load in table
          // ********
          // ********
          // ********


      head
        h1 Current schedule
        br
        br
        input(type='hidden', id="docs_json", value= JSON.stringify(docs))
        br


        button.col-sm-3.btn.btn-primary(type='submit', value='Add', onClick="") View by employee type
        br
        br

        button.col-sm-3.btn.btn-primary(type='submit', value='Add', onClick="") View by employee name
        br
        br
        br
        select#ddl(onchange="change_table()")
          option(value='')
          script.
            //
            //
            // defining dropdown
            //
            //
           var docs_json = document.getElementById("docs_json").value;
           var docs_json_value = JSON.parse(docs_json);
           var listItems = [];

           //putting items into initial ist
           for (var i = 0; i < docs_json_value.length; i++){
             itemTest = docs_json_value[i].shift_date_range_start + " to " + docs_json_value[i].shift_date_range_end;
             listItems[i] = itemTest;
            }
            //removing duplicates
            var seen = {};
            var out = [];
            var j = 0;
            for(var i = 0; i < listItems.length; i++) {
                var item = listItems[i];
                if(seen[item] !== 1) {
                      seen[item] = 1;
                      out[j++] = item;
                }
           }

           //putting values form de-deuped list into dropdown
           var dropdown = document.getElementById("ddl");
           for (var i = 0; i<out.length; i++){
             var itemTest= out[i];
             dropdown[dropdown.length] = new Option(itemTest, itemTest);
           };
           console.log(docs_json_value)

        br
        br


        #mydata
          b Employee types saved in the system:
          table#myTableData2(border='1', cellpadding='2')
            tr
              th
                b Employee type
              th
                b Monday
              th
                b Tuesday
              th
                b Wednesday
              th
                b Thursday
              th
                b Friday
              th
                b Saturday
              th
                b Sunday


            each doc in docs

              // build a new table row
              tr

                // insert table data
                td #{doc.employee_type}

                // add the update and delete buttons
                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!
                  br
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!
                // add the update and delete buttons
                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!
                  // add the update and delete buttons
                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!

                  // add the update and delete buttons
                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!

                  // add the update and delete buttons
                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!

                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!

                td
                  .type1(style='width:100px;height:60px;border:5px solid #16CA99;background-colo #16CA99;background-color: #16CA99;border-radius: 7px;') This is a rectangle!

                // move to next person in the people array ...

          br
          br













  else if user.user_type == 'employee_type'
    doctype html
    html
      head
        meta(charset='utf-8')
        meta(http-equiv='X-UA-Compatible', content='IE=edge')
        meta(name='viewport', content='width=device-width, initial-scale=1.0')
        meta(name='theme-color' content='#4DA5F4')
        meta(name='csrf-token', content=_csrf)
        title #{title} - Hackathon Starter
        link(rel='shortcut icon', href='/favicon.png')
        link(rel='stylesheet', href='/css/main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_main.css')
        link(rel='stylesheet', type='text/css', href='css/launch_devices.css')
      body
        include partials/header
        script(src='/js/lib/jquery-2.2.4.min.js')
        script(src='/js/lib/bootstrap.min.js')
        script(src='/js/main.js')
        link(rel='stylesheet', href='/css/main.css')
        .container
          include partials/flash
          block content

        include partials/footer

        script(src='/js/lib/jquery-2.2.4.min.js')
        script(src='/js/lib/bootstrap.min.js')
        script(src='/js/main.js')

        // Google Analytics: change UA-XXXXX-X to be your site's ID
        script.
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-XXXXX-X', 'auto');
          ga('send', 'pageview');
